STM32CubeMXはバージョン6.3.0を選択
IDEは1.9.0
wolfSSLのバージョンは5.5.3
ファームウェアパッケージのバージョンはSTM32Cube FW_F4 V1.26.1

F446ZEのdefineがなかったので、#elseに入った。
右huart4をhuart3に変更

●VNC viewerで各ubuntu画面を表示可能にしておく

■新規追加
stm32f446ret6に実装

RNG機能の追加

■修正点
●コンフィグファイル（wolfSSL.I-CUBE-wolfSSL_conf.h）にF446専用のマクロがない
対応：追加

●F446ZEではRNGサポートされていない
対応：#define NO_STM32_RNGを有効化

●uart2で定義されているDMA転送（受信バッファ→メモリ）の転送先が登録されていない
対応：stlink経由のVCPに変更して、
受信関数のタイムアウト時間を0.1sから10sに変更し、
2バイトの受信待機時間を変更した。
→正常に入力が受付されるようになった

●generateすればconfigファイルの値が書き換わってしまう
→wolfSSLの生成前ソフトウェアパッケージを修正
→仕事を想定して修正版のソフトウェアパッケージを作成する狙い

●TLS_UARTがhuart2にマクロ設定されている
→huart3に変更

●DMAがhuart3のRXに紐づいていない

■新機能追加

サンプルプログラムのメニュー欄に、
テスト画像をクライアントからサーバーへ送信するプログラムを追加

テスト画像：wolfSSLの画像
↓
base64に変換
↓
ソースコードのヘッダファイルに格納する（サーバ証明書のように）
↓
127.0.0.1のサーバ（192.168.128.190）に転送
↓
サーバーにファイル（base64データ）が格納される
↓
サーバ上でbase64データを指定拡張子でデコードするバッチを実行してファイル表示する
↓

修正するソースコード
サーバ側：server-tls-uart.c
●クライアントから受け取ったbase64をファイルに保存する


このエラーは
./server-tls: error while loading shared libraries: libwolfssl.so.43: cannot open shared object file: No such file or directory
このコマンドで解決した
sudo ldconfig



pq/tls/stm32のserver-tls-uart.cから見たサーバ証明書のパスについてエラーが発生
→相対パスが間違っている
→stm32のフォルダーが新規作成されているため、パスが間違っている

→ローカルホストを用いた通信は成功している模様。
→サーバ側メッセージとして「TLS accept error -341」
→クライアント（stm32f446zeマイコン）側メッセージとして「TLS connect error 6
TLS 1.3 Client: Return code -1」

pqはaki_ky・・・.hヘッダファイルが生成されないなど、
不具合がありそうなので、
pqはfalseにして、
tlsのuart serverサンプルで実行する。
→これも-341でエラーになる。

→PQは関係ない？


→nucleoボードとft232ボード間のGNDを接続しておらず、
エラーが発生していた。
→GNDを共通にして、サンプルプログラムの動作を確認（双方向OK）

*.ftlファイルに以下のようなコードを付け加えることで、
ユーザーコードが削除されないことを発見した。
/* USER CODE BEGIN 0 */
/* USER CODE END 0 */

base64画像データをgzipで圧縮して
ヘッダファイルに格納
→送信成功

サーバ側でgzip解凍を行い、
base64データをデコードして、
デコードデータを画像ファイルにして
ファイル保存する


































































































































































































































































































































































































































































































































































































































































































































































































































































